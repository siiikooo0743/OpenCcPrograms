--[[
	BuildPlatform
	
	Copyright (C) 2015,2016 siiikooo0743
	
	This programm is part of the OpenCcPrograms-project and licensed under the GPLv3, 
	see LicenseDetails for more details and LICENSE for the complete license.
	
	Author: siiikooo0743
	Website: https://github.com/siiikooo0743/OpenCcPrograms
	Version 1.4
	
	Whith this program a turtle builds a platform with the materail in his inventory.
	The first two arguments specifie the size of the platform.
]]

function move()
   if(turtle.getFuelLevel()<100) 
   then
    turtle.select(16)
    turtle.refuel(1)
   end
   while (not(turtle.forward())) do
    turtle.select(16)
    turtle.refuel(1)
   end
end

function turn(side)
  if(side == 0) then
    turtle.turnLeft()
    move()
    turtle.turnLeft()
  end
  
  if(side == 1) then
    turtle.turnRight()
    move()
    turtle.turnRight()
  end
end

function placeTorch()
 turtle.turnRight()
 turtle.select(13)
 turtle.place()
 turtle.turnLeft()
end

function place()
  turtle.select(1)
  for i = 1, 12 do
    if (not(turtle.getItemCount(i) == 0)) then
      turtle.select(i)
      break
    end
  end
  turtle.placeDown()
end



local arg = { ... }

turtle.select(1)
side = 1

for i = 1, arg[2] do
  for j = 1, (arg[1]) do
    place()
    
    if(math.fmod(i,6)==2 and math.fmod(j,6)==2)
    then
     placeTorch()
    end
    
    if(j == arg[1]) 
    then 
     break
    end
  end
  
  if(i == arg[2]) 
  then 
   break
  end
  turn(side)
  
  if(side == 0) then
    side = 1
  else
    side = 0
  end
end  
